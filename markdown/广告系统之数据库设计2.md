# 广告系统之数据库设计
### 表设计

表 | 说明
------- | -------
position | 广告位表
advertiser|广告信息表
region|地区表，维护区域表，防止重名
ad_channle_region|广告渠道地区关联表
advertiser_pool|广告池
advertiser_pool_ad|广告池广告关联表
ad_stat|统计

#### 获取一个广告位下的广告：
1. 根据平台、渠道、地区、位置过滤`ad_channle_region`；
2. 过滤`advertiser`中有效的广告；
3. 地区需要考虑命中率，市级>省级>全国；

#### 何为一个有效的广告
1. 开始时间和结束时间包含当前时间：==started_at<=now<=ended_at==；
2. 点击次数和曝光次数小于最大次数；
3. 满足条件1和条件2；

#### 广告管理
1. 每个位置维护一个广告列表，排序：先按照开始时间升序，再按照区域排序，顺序为全国>省级>市级；
2. 广告投放是有限制的，同一时间，一个广告位（位置）下只能有一个相同渠道和相同区域的广告；

